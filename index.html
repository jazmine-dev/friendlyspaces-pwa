<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Friendly Spaces</title>
    <meta name="theme-color" content="#1E52BA">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23RW5YZHCW"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-23RW5YZHCW');
    </script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
    <link rel="stylesheet" href="styles/app.css" />
</head>
<body>
    <div id="install-banner" class="install-banner hidden">
        <span id="install-banner-text">Install Friendly Spaces for quick access.</span>
        <button id="install-button">Add to Home Screen</button>
    </div>
    <div id="intro-overlay" class="intro-overlay hidden" aria-hidden="true">
        <div class="intro-card" role="dialog" aria-modal="true" aria-labelledby="intro-title">
            <button class="intro-close" type="button" id="intro-close" aria-label="Close">✕</button>
            <img class="intro-icon" src="icons/icon-192.png" alt="Friendly Spaces">
            <img class="intro-wordmark" src="assets/FriendlySpaces_blue.png" alt="Friendly Spaces">
            <div class="intro-slides" id="intro-slides">
                <section class="intro-slide active" data-intro-slide="0">
                    <h2 id="intro-title">Welcome to Friendly Spaces</h2>
                    <p id="intro-text">Your guide to certified family-friendly cafés, restaurants, shops, and cultural venues across Switzerland. Check out our map to discover places that truly welcome families with young children, from safe play areas to convenient changing facilities.</p>
                </section>
                <section class="intro-slide" data-intro-slide="1">
                    <h2 id="intro-install-title">Install for faster access</h2>
                    <p class="intro-install-line">
                        <strong id="intro-install-ios-label">iPhone:</strong>
                        <span id="intro-install-ios-text">Open in Safari -> tap Share -> Add to Home Screen.</span>
                    </p>
                    <p class="intro-install-line">
                        <strong id="intro-install-android-label">Android:</strong>
                        <span id="intro-install-android-text">Tap Add to Home screen at the top. The app installs automatically.</span>
                    </p>
                </section>
                <section class="intro-slide" data-intro-slide="2">
                    <h2 id="intro-map-title">Find the right place fast</h2>
                    <p id="intro-map-text">Use Search for city or venue name, apply Filters for your family needs, then open a pin or card for the full profile.</p>
                </section>
            </div>
            <div class="intro-dots" role="tablist" aria-label="Onboarding slides">
                <button class="intro-dot active" type="button" data-intro-dot="0" aria-label="Slide 1"></button>
                <button class="intro-dot" type="button" data-intro-dot="1" aria-label="Slide 2"></button>
                <button class="intro-dot" type="button" data-intro-dot="2" aria-label="Slide 3"></button>
            </div>
            <div class="intro-actions">
                <button class="intro-nav" type="button" id="intro-prev">Back</button>
                <button class="intro-nav intro-nav-primary" type="button" id="intro-next">Next</button>
            </div>
            <label class="intro-checkbox">
                <input type="checkbox" id="intro-skip">
                <span id="intro-skip-label">Do not show again</span>
            </label>
        </div>
    </div>
    <header id="app-header">
        <div id="brand">
            <span id="brand-logo-wrap">
                <img id="brand-logo" src="assets/FriendlySpaces_white.png" alt="Friendly Spaces">
            </span>
            <h1 id="app-title">Friendly Spaces</h1>
        </div>
        <button id="menu-toggle" type="button" aria-label="Open menu">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <line x1="4" y1="6" x2="20" y2="6"></line>
                <line x1="4" y1="12" x2="20" y2="12"></line>
                <line x1="4" y1="18" x2="20" y2="18"></line>
            </svg>
        </button>
    </header>
    <div id="top-search-bar">
        <div id="top-search-container">
            <input type="text" id="top-search-input" placeholder="Search by name, city, or address...">
            <span id="top-search-icon" aria-hidden="true">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="11" cy="11" r="7"></circle>
                    <line x1="16.65" y1="16.65" x2="21" y2="21"></line>
                </svg>
            </span>
            <div id="top-search-dropdown"></div>
        </div>
    </div>
    <div id="quick-filters-row">
        <button class="quick-filter-pill" id="pill-filters" type="button">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="4" y1="6" x2="20" y2="6"></line>
                <line x1="4" y1="12" x2="20" y2="12"></line>
                <line x1="4" y1="18" x2="20" y2="18"></line>
                <circle cx="8" cy="6" r="2" fill="currentColor"></circle>
                <circle cx="16" cy="12" r="2" fill="currentColor"></circle>
                <circle cx="10" cy="18" r="2" fill="currentColor"></circle>
            </svg>
            <span data-pill-label="filters">Filters</span>
        </button>
        <button class="quick-filter-pill" id="pill-favorites" type="button" aria-label="Favorites">
            <svg class="quick-filter-heart" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M20.8 6.6c-1.4-1.4-3.8-1.4-5.2 0L12 10.2 8.4 6.6C7 5.2 4.6 5.2 3.2 6.6c-1.4 1.4-1.4 3.8 0 5.2L12 21l8.8-9.2c1.4-1.4 1.4-3.8 0-5.2z"></path>
            </svg>
        </button>
        <button class="quick-filter-pill" id="pill-cafe" data-filter-category="venueType" data-filter-value="cafe" type="button">
            <span data-pill-label="cafe">Cafe</span>
        </button>
        <button class="quick-filter-pill" id="pill-baby" data-filter-category="ageRange" data-filter-value="baby" type="button">
            <span data-pill-label="baby">Baby</span>
        </button>
        <button class="quick-filter-pill" id="pill-toddler" data-filter-category="ageRange" data-filter-value="toddler" type="button">
            <span data-pill-label="toddler">Toddler</span>
        </button>
        <button class="quick-filter-pill" id="pill-play-area" data-filter-category="amenities" data-filter-value="play-area" type="button">
            <span data-pill-label="play-area">Play Area</span>
        </button>
    </div>
    <div id="sheet-backdrop"></div>
    <div id="container">
        <aside id="sidebar">
            <div id="drag-handle"></div>
            <div id="sidebar-header">
                <h2 id="sidebar-title">Find a Friendly Space</h2>
                <div id="search-container">
                    <input type="text" id="search-input" placeholder="Search by name, city, or address...">
                    <span id="search-icon" aria-hidden="true">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#1E52BA" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="7"></circle>
                            <line x1="16.65" y1="16.65" x2="21" y2="21"></line>
                        </svg>
                    </span>
                    <div id="search-dropdown"></div>
                </div>
            </div>

            <div id="filters-container">
                <div id="sidebar-actions">
                    <button id="sidebar-favorites" class="filter-button" type="button">
                        <svg class="favorite-icon" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M20.8 6.6c-1.4-1.4-3.8-1.4-5.2 0L12 10.2 8.4 6.6C7 5.2 4.6 5.2 3.2 6.6c-1.4 1.4-1.4 3.8 0 5.2L12 21l8.8-9.2c1.4-1.4 1.4-3.8 0-5.2z"></path>
                        </svg>
                        <span id="sidebar-favorites-label">Favorites</span>
                    </button>
                </div>
                <div class="filter-category">
                    <h3 data-category-heading="venueType">Venue Type</h3>
                    <div class="filter-buttons" id="venueType-filters"></div>
                </div>

                <div class="filter-category">
                    <h3 data-category-heading="cuisineType">Cuisine Type</h3>
                    <div class="filter-buttons" id="cuisineType-filters"></div>
                </div>

                <div class="filter-category">
                    <h3 data-category-heading="ageRange">Age Range</h3>
                    <div class="filter-buttons" id="ageRange-filters"></div>
                </div>

                <div class="filter-category">
                    <h3 data-category-heading="amenities">Amenities</h3>
                    <div class="filter-buttons" id="amenities-filters"></div>
                </div>
            </div>

            <div id="active-filters">
                <button id="reset-filters" type="button">Reset all filters</button>
                <button id="apply-filters" type="button">Show all spaces</button>
            </div>
        </aside>

        <div id="main-view">
            <button id="toggle-sidebar">☰</button>
            <div id="map" class="view-panel"></div>
            <div id="list-view" class="view-panel hidden">
                <div id="list-cards" class="venue-list"></div>
                <div id="list-empty" class="list-empty" hidden>No venues found.</div>
            </div>
        </div>
    </div>
    <div id="menu-backdrop" aria-hidden="true"></div>
    <aside id="menu-drawer" aria-label="App menu">
        <div id="menu-header">
            <div class="menu-brand">
                <img class="menu-logo" src="icons/icon-192.png" alt="Friendly Spaces">
            </div>
            <button id="menu-close" type="button" aria-label="Close menu">✕</button>
        </div>
        <button class="menu-button" id="menu-suggest" type="button">
            <span class="menu-label">Suggest a venue</span>
        </button>
        <button class="menu-button" id="menu-share" type="button">
            <span class="menu-label">Share the app</span>
        </button>
        <button class="menu-button" id="menu-about" type="button">
            <span class="menu-label">About us</span>
        </button>
        <button class="menu-button" id="menu-install-help" type="button">
            <span class="menu-label">How to install</span>
        </button>
        <p class="menu-section-title" id="menu-language-title">Language</p>
        <div id="language-toggle" aria-label="Language switcher">
            <button type="button" data-lang="de">DE</button>
            <button type="button" data-lang="fr">FR</button>
            <button type="button" data-lang="en">EN</button>
        </div>
        <div class="menu-footer">
            <button class="menu-link" id="menu-bug" type="button">Report a bug</button>
        </div>
    </aside>
    <section id="suggest-view" class="fullscreen-panel" aria-hidden="true">
        <div class="fullscreen-header suggest-header">
            <img class="suggest-header-logo" src="assets/logo-friendly.png" alt="Friendly Spaces">
            <button class="fullscreen-close" type="button" id="suggest-close" aria-label="Close">✕</button>
        </div>
        <div class="fullscreen-body">
            <h2 class="suggest-title" id="suggest-title">Suggest a space</h2>
            <p class="suggest-tagline" id="suggest-tagline">Do you know of any places that would be a great fit for friendly spaces?</p>
            <div class="suggest-options" role="group" aria-label="Your role">
                <button type="button" class="suggest-option active" data-suggest-role="owner">
                    <span class="suggest-illustration" aria-hidden="true">
                        <img src="assets/icon-shop.jpg" alt="" class="suggest-icon">
                    </span>
                    <span class="suggest-label" data-suggest-label="owner">I work at a Friendly Space</span>
                </button>
                <button type="button" class="suggest-option" data-suggest-role="fan">
                    <span class="suggest-illustration" aria-hidden="true">
                        <img src="assets/icon-family.jpg" alt="" class="suggest-icon">
                    </span>
                    <span class="suggest-label" data-suggest-label="fan">I can recommend a Friendly Space</span>
                </button>
            </div>
            <form id="suggest-form" class="suggest-form" name="suggest" method="POST" data-netlify="true" netlify-honeypot="bot-field">
                <input type="hidden" name="form-name" value="suggest">
                <p class="hidden">
                    <label>Don’t fill this out: <input name="bot-field"></label>
                </p>
                <div>
                    <label for="venue-name" id="suggest-venue-name-label">Venue name</label>
                    <input id="venue-name" name="venueName" required>
                </div>
                <div>
                    <label for="venue-city" id="suggest-venue-city-label">City</label>
                    <input id="venue-city" name="venueCity" required>
                </div>
                <div id="suggest-message">
                    <label for="venue-message">Message (optional)</label>
                    <textarea id="venue-message" name="venueMessage"></textarea>
                </div>
                <div id="suggest-why">
                    <label for="venue-why" id="suggest-why-label">Why is it friendly? (optional)</label>
                    <textarea id="venue-why" name="venueWhy"></textarea>
                </div>
                <div id="suggest-fan-email">
                    <label for="fan-email" id="fan-email-label">Email (optional)</label>
                    <input id="fan-email" name="fanEmail" type="email">
                </div>
                <div id="owner-fields">
                    <div>
                        <label for="owner-name" id="owner-name-label">Your name</label>
                        <input id="owner-name" name="ownerName">
                    </div>
                    <div>
                        <label for="owner-email" id="owner-email-label">Your email</label>
                        <input id="owner-email" name="ownerEmail" type="email">
                    </div>
                    <div>
                        <label for="owner-phone" id="owner-phone-label">Phone (optional)</label>
                        <input id="owner-phone" name="ownerPhone" type="tel">
                    </div>
                </div>
                <label class="suggest-checkbox" id="suggest-newsletter">
                    <input type="checkbox" id="suggest-newsletter-input" name="newsletterOptIn">
                    <span id="suggest-newsletter-label">Sign me up for the newsletter</span>
                </label>
                <button class="suggest-submit" type="submit" id="suggest-submit">Send suggestion</button>
                <div class="form-status" id="suggest-status" role="status" aria-live="polite"></div>
            </form>
        </div>
    </section>
    <section id="about-view" class="fullscreen-panel" aria-hidden="true">
        <div class="fullscreen-header suggest-header">
            <img class="suggest-header-logo" src="assets/logo-friendly.png" alt="Friendly Spaces">
            <button class="fullscreen-close" type="button" id="about-close" aria-label="Close">✕</button>
        </div>
        <div class="fullscreen-body">
            <img class="about-logo" src="assets/wordmark-blue.png" alt="Friendly Spaces">
            <p id="about-body">Friendly Spaces is Switzerland's first family-friendly certification label, helping parents find the best cafés, restaurants, shops, and cultural spaces for families with young children. Through our rigorous on-site audits, we ensure every certified venue truly welcomes and accommodates your little ones.</p>
            <p class="about-section-title about-section-spacer" id="about-keep-title"><strong>Keep in Touch</strong></p>
            <div class="about-socials">
                <a class="detail-icon-btn" href="https://www.instagram.com/friendly.spaces/" target="_blank" rel="noopener noreferrer">
                    <span class="icon-circle">
                        <svg viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg>
                    </span>
                    <span class="icon-label">Instagram</span>
                </a>
                <a class="detail-icon-btn" href="https://www.tiktok.com/@friendlyspaces" target="_blank" rel="noopener noreferrer">
                    <span class="icon-circle">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 12a4 4 0 1 0 4 4V4c1 2 3 4 5 4"/></svg>
                    </span>
                    <span class="icon-label">TikTok</span>
                </a>
                <a class="detail-icon-btn" href="https://www.friendlyspaces.ch/" target="_blank" rel="noopener noreferrer">
                    <span class="icon-circle">
                        <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/></svg>
                    </span>
                    <span class="icon-label">Website</span>
                </a>
                <a class="detail-icon-btn" href="https://www.linkedin.com/company/friendly-spaces/" target="_blank" rel="noopener noreferrer">
                    <span class="icon-circle">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M8 11v5"/><path d="M8 8v.01"/><path d="M12 16v-5"/><path d="M16 16v-3a2 2 0 0 0-4 0"/></svg>
                    </span>
                    <span class="icon-label">LinkedIn</span>
                </a>
            </div>
            <p class="about-section-title about-section-spacer" id="about-partner-title"><strong>Partner With Us</strong></p>
            <p id="about-partner-body">Support Switzerland's growing family-friendly movement. Friendly Spaces offers sponsorship and advertising opportunities to brands and organizations who share our mission of making Swiss cities more welcoming for families. Reach engaged parents across Switzerland.</p>
            <button class="suggest-submit about-cta" type="button" id="about-partner">Inquire about partnerships</button>
            <p class="map-attribution">Map data © <a href="https://www.openstreetmap.org/copyright" target="_blank" rel="noopener">OpenStreetMap</a> contributors</p>
        </div>
    </section>
    <section id="bug-view" class="fullscreen-panel" aria-hidden="true">
        <div class="fullscreen-header suggest-header">
            <img class="suggest-header-logo" src="assets/logo-friendly.png" alt="Friendly Spaces">
            <button class="fullscreen-close" type="button" id="bug-close" aria-label="Close">✕</button>
        </div>
        <div class="fullscreen-body">
            <h2 class="suggest-title" id="bug-title">Report a bug</h2>
            <form id="bug-form" class="suggest-form" name="bug" method="POST" data-netlify="true" netlify-honeypot="bot-field">
                <input type="hidden" name="form-name" value="bug">
                <p class="hidden">
                    <label>Don’t fill this out: <input name="bot-field"></label>
                </p>
                <div>
                    <label for="bug-message" id="bug-message-label">Message</label>
                    <textarea id="bug-message" name="bugMessage" required></textarea>
                </div>
                <button class="suggest-submit" type="submit" id="bug-submit">Send</button>
                <div class="form-status" id="bug-status" role="status" aria-live="polite"></div>
            </form>
        </div>
    </section>
    <section id="install-help-view" class="fullscreen-panel" aria-hidden="true">
        <div class="fullscreen-header suggest-header">
            <img class="suggest-header-logo" src="assets/logo-friendly.png" alt="Friendly Spaces">
            <button class="fullscreen-close" type="button" id="install-help-close" aria-label="Close">✕</button>
        </div>
        <div class="fullscreen-body">
            <h2 class="suggest-title" id="install-help-title">Install Friendly Spaces App</h2>
            <p class="suggest-tagline" id="install-help-tagline">Add the Friendly Spaces app to your home screen for faster access.</p>
            <div class="install-help-block">
                <h3 id="install-help-ios-title">On iPhone (Safari)</h3>
                <ol>
                    <li id="install-help-ios-step-1">Open the Friendly Spaces app in Safari.</li>
                    <li id="install-help-ios-step-2">Tap Share (square with arrow).</li>
                    <li id="install-help-ios-step-3">Choose Add to Home Screen.</li>
                </ol>
            </div>
            <div class="install-help-block">
                <h3 id="install-help-android-title">On Android (Chrome)</h3>
                <ol>
                    <li id="install-help-android-step-1">Open the Friendly Spaces app in Chrome.</li>
                    <li id="install-help-android-step-2">Tap Install from the browser prompt or menu.</li>
                    <li id="install-help-android-step-3">Confirm to add it to your home screen.</li>
                </ol>
            </div>
            <div class="install-help-block">
                <h3 id="install-help-use-title">How to use the app</h3>
                <ul>
                    <li id="install-help-use-step-1">Use Search to find venues by city, name, or address.</li>
                    <li id="install-help-use-step-2">Apply Filters to match your family needs.</li>
                    <li id="install-help-use-step-3">Open a pin or card to view the full profile.</li>
                </ul>
            </div>
        </div>
    </section>
    <nav id="bottom-tabs" aria-label="Primary">
        <button class="bottom-tab-button active" data-view="map" id="bottom-tab-map" type="button">
            <span>Map</span>
            <svg class="bottom-tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <polygon points="1 6 8 3 16 6 23 3 23 18 16 21 8 18 1 21"></polygon>
                <line x1="8" y1="3" x2="8" y2="18"></line>
                <line x1="16" y1="6" x2="16" y2="21"></line>
            </svg>
        </button>
        <button class="bottom-tab-button" data-view="list" id="bottom-tab-list" type="button">
            <span>List</span>
            <svg class="bottom-tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <line x1="8" y1="6" x2="21" y2="6"></line>
                <line x1="8" y1="12" x2="21" y2="12"></line>
                <line x1="8" y1="18" x2="21" y2="18"></line>
                <circle cx="4" cy="6" r="1"></circle>
                <circle cx="4" cy="12" r="1"></circle>
                <circle cx="4" cy="18" r="1"></circle>
            </svg>
        </button>
    </nav>
    <div id="detail-modal" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="detail-modal-card">
            <button class="detail-back-button" id="detail-modal-close" type="button" aria-label="Go back">
                <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
            </button>
            <div id="detail-modal-content"></div>
        </div>
    </div>

    <!-- Netlify form detection -->
    <form name="suggest" method="POST" data-netlify="true" netlify-honeypot="bot-field" class="hidden">
        <input type="hidden" name="form-name" value="suggest">
        <p class="hidden">
            <label>Don’t fill this out: <input name="bot-field"></label>
        </p>
        <input name="venueName">
        <input name="venueCity">
        <textarea name="venueMessage"></textarea>
        <textarea name="venueWhy"></textarea>
        <input name="ownerName">
        <input name="ownerEmail">
        <input name="ownerPhone">
        <input name="role">
    </form>
    <form name="bug" method="POST" data-netlify="true" netlify-honeypot="bot-field" class="hidden">
        <input type="hidden" name="form-name" value="bug">
        <p class="hidden">
            <label>Don’t fill this out: <input name="bot-field"></label>
        </p>
        <textarea name="bugMessage"></textarea>
    </form>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
    <script src="scripts/app.js"></script>
</body>
</html>
